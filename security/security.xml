<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * @file security.xml
 * @brief Security groups and access rights configuration
 *
 * This file defines the security structure including:
 * - Module category for grouping permissions
 * - Student group with limited access
 * - Professor group with teaching privileges
 * - Administrator group with full access
 *
 * Features:
 * - Hierarchical group structure
 * - Implied permissions inheritance
 * - Portal and internal user integration
 * - Access level documentation
 *
-->
<odoo>
    <!-- University Module Category -->
    <record id="module_category_university" model="ir.module.category"> <!-- categoria -->
        <field name="name">University</field>
        <field name="description">Access management for University module</field>
        <field name="sequence">20</field>   <!-- secuencia 20 orden de visualizacion por prioridad-->
    </record>

    <!-- Student Group -->
    <record id="group_university_student" model="res.groups">  <!-- Grupos -->
        <field name="name">Student</field>
        <field name="category_id" ref="module_category_university"/> <!-- hace referencia al modulo universidad -->
        <field name="implied_ids" eval="[(4, ref('base.group_portal'))]"/> <!-- 4 many2many, añade registro heredara de grupo portal/acceso limitado -->
        <field name="comment">Limited access to own data and grades</field>
    </record>

    <!-- Professor Group -->
    <record id="group_university_professor" model="res.groups">
        <field name="name">Professor</field>
        <field name="category_id" ref="module_category_university"/> <!-- hacemos referencia a universidad -->
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>  <!-- 4 many2many añade registro y hereda de group user (usuarios internos) -->
        <field name="comment">Access to grade management and assigned students</field>
    </record>

    <!-- Administrator Group -->
    <record id="group_university_manager" model="res.groups">
        <field name="name">University Administrator</field>
        <field name="category_id" ref="module_category_university"/> <!-- referencia al modulo -->
        <field name="implied_ids" eval="[(4, ref('group_university_professor'))]"/> <!-- hereda permisos del profesor -->
        <field name="users" eval="[(4, ref('base.user_admin'))]"/>  <!-- Asignamos de privilegios de admin -->
        <field name="comment">Full access to all functionalities</field>
    </record>

</odoo>